[globals]
VX_CSR_ADDR_BITS = 12
VX_DCR_ADDR_BITS = 12
VX_CSR_MPM_BASE = 0xB00
VX_CSR_MPM_BASE_H = 0xB80
VX_CSR_MPM_USER = 0xB03
VX_CSR_MPM_USER_H = 0xB83

[dcr_base]
VX_DCR_BASE_STATE_BEGIN = 0x001
VX_DCR_BASE_STARTUP_ADDR0 = 0x001
VX_DCR_BASE_STARTUP_ADDR1 = 0x002
VX_DCR_BASE_STARTUP_ARG0 = 0x003
VX_DCR_BASE_STARTUP_ARG1 = 0x004
VX_DCR_BASE_MPM_CLASS = 0x005
VX_DCR_BASE_STATE_END = 0x006

# TMA descriptor DCR mapping
# access pattern:
#   VX_DCR_TMA_DESC_BASE + slot * VX_DCR_TMA_DESC_STRIDE + field_off
[dcr_tma]
VX_DCR_TMA_STATE_BEGIN = 0x100
VX_DCR_TMA_DESC_BASE = 0x100
VX_DCR_TMA_DESC_STRIDE = 24

VX_DCR_TMA_DESC_BASE_LO_OFF = 0
VX_DCR_TMA_DESC_BASE_HI_OFF = 1

VX_DCR_TMA_DESC_SIZE0_OFF = 2
VX_DCR_TMA_DESC_SIZE1_OFF = 3
VX_DCR_TMA_DESC_SIZE2_OFF = 4
VX_DCR_TMA_DESC_SIZE3_OFF = 5
VX_DCR_TMA_DESC_SIZE4_OFF = 6

VX_DCR_TMA_DESC_STRIDE0_OFF = 7
VX_DCR_TMA_DESC_STRIDE1_OFF = 8
VX_DCR_TMA_DESC_STRIDE2_OFF = 9
VX_DCR_TMA_DESC_STRIDE3_OFF = 10

VX_DCR_TMA_DESC_META_OFF = 11

VX_DCR_TMA_DESC_ESTRIDE0_OFF = 12
VX_DCR_TMA_DESC_ESTRIDE1_OFF = 13
VX_DCR_TMA_DESC_ESTRIDE2_OFF = 14
VX_DCR_TMA_DESC_ESTRIDE3_OFF = 15
VX_DCR_TMA_DESC_ESTRIDE4_OFF = 16

VX_DCR_TMA_DESC_TILESIZE01_OFF = 17
VX_DCR_TMA_DESC_TILESIZE23_OFF = 18
VX_DCR_TMA_DESC_TILESIZE4_OFF = 19

VX_DCR_TMA_DESC_CFILL_OFF = 20

VX_DCR_TMA_DESC_COUNT = 16
VX_DCR_TMA_STATE_END = 0x280

[tma_desc_meta]
VX_TMA_DESC_META_DIM_BITS = 3
VX_TMA_DESC_META_ELEMSZ_BITS = 2
VX_TMA_DESC_META_LAYOUT_BITS = 1
VX_TMA_DESC_META_SWIZZLE_BITS = 2
VX_TMA_DESC_META_INTERLEAVE_BITS = 2
VX_TMA_DESC_META_L2PROMO_BITS = 2

VX_TMA_DESC_META_DIM_LSB = 0
VX_TMA_DESC_META_ELEMSZ_LSB = 3
VX_TMA_DESC_META_LAYOUT_LSB = 5
VX_TMA_DESC_META_SWIZZLE_LSB = 6
VX_TMA_DESC_META_INTERLEAVE_LSB = 8
VX_TMA_DESC_META_L2PROMO_LSB = 10

[csr_base]
VX_CSR_MVENDORID = 0xF11
VX_CSR_MARCHID = 0xF12
VX_CSR_MIMPID = 0xF13
VX_CSR_MHARTID = 0xF14
VX_CSR_SATP = 0x180
VX_CSR_PMPCFG0 = 0x3A0
VX_CSR_PMPADDR0 = 0x3B0
VX_CSR_MSTATUS = 0x300
VX_CSR_MISA = 0x301
VX_CSR_MEDELEG = 0x302
VX_CSR_MIDELEG = 0x303
VX_CSR_MIE = 0x304
VX_CSR_MTVEC = 0x305
VX_CSR_MSCRATCH = 0x340
VX_CSR_MEPC = 0x341
VX_CSR_MCAUSE = 0x342
VX_CSR_MNSTATUS = 0x744

[csr_fpu]
VX_CSR_FFLAGS = 0x001
VX_CSR_FRM = 0x002
VX_CSR_FCSR = 0x003

[csr_vector]
VX_CSR_VSTART = 0x008
VX_CSR_VXSAT = 0x009
VX_CSR_VXRM = 0x00A
VX_CSR_VCSR = 0x00F
VX_CSR_VL = 0xC20
VX_CSR_VTYPE = 0xC21
VX_CSR_VLENB = 0xC22

[csr_gpgpu]
VX_CSR_THREAD_ID = 0xCC0
VX_CSR_WARP_ID = 0xCC1
VX_CSR_CORE_ID = 0xCC2
VX_CSR_ACTIVE_WARPS = 0xCC3
VX_CSR_ACTIVE_THREADS = 0xCC4  # warning! this value is also used in LLVM
VX_CSR_NUM_THREADS = 0xFC0
VX_CSR_NUM_WARPS = 0xFC1
VX_CSR_NUM_CORES = 0xFC2
VX_CSR_LOCAL_MEM_BASE = 0xFC3
VX_CSR_NUM_BARRIERS = 0xFC4

[dcr_mpm_class]
VX_DCR_MPM_CLASS_BASE = 0
VX_DCR_MPM_CLASS_CORE = 1
VX_DCR_MPM_CLASS_MEM = 2

[csr_mpm_base]
VX_CSR_MCYCLE = 0xB00
VX_CSR_MCYCLE_H = 0xB80
VX_CSR_MPM_RESERVED = 0xB01
VX_CSR_MPM_RESERVED_H = 0xB81
VX_CSR_MINSTRET = 0xB02
VX_CSR_MINSTRET_H = 0xB82

[csr_mpm_core]

# PERF: scheduler
VX_CSR_MPM_SCHED_IDLE = 0xB03 # cycles where scheduler is idle
VX_CSR_MPM_SCHED_IDLE_H = 0xB83
VX_CSR_MPM_ACTIVE_WARPS = 0xB04 # active warps per cycle sum
VX_CSR_MPM_ACTIVE_WARPS_H = 0xB84
VX_CSR_MPM_STALLED_WARPS = 0xB05  # total warps stalled at barrier
VX_CSR_MPM_STALLED_WARPS_H = 0xB85
VX_CSR_MPM_ISSUED_WARPS = 0xB06 # issued warps per cycle sum
VX_CSR_MPM_ISSUED_WARPS_H = 0xB86
VX_CSR_MPM_ISSUED_THREADS = 0xB07 # issued threads per cyclce sum
VX_CSR_MPM_ISSUED_THREADS_H = 0xB87

# PERF: pipeline stalls
VX_CSR_MPM_STALL_FETCH = 0xB08
VX_CSR_MPM_STALL_FETCH_H = 0xB88
VX_CSR_MPM_STALL_IBUF = 0xB09 # instruction buffer stalled because full
VX_CSR_MPM_STALL_IBUF_H = 0xB89
VX_CSR_MPM_STALL_SCRB = 0xB0A # scoreboard stalled due to data dependency
VX_CSR_MPM_STALL_SCRB_H = 0xB8A
VX_CSR_MPM_STALL_OPDS = 0xB0B # operands fetch stage stalled due to bank conflict in
VX_CSR_MPM_STALL_OPDS_H = 0xB8B
VX_CSR_MPM_STALL_ALU = 0xB0C  # dispatch stage stalled due to ALU pipeline full
VX_CSR_MPM_STALL_ALU_H = 0xB8C
VX_CSR_MPM_STALL_FPU = 0xB0D  # dispatch stage stalled due to FPU pipeline full
VX_CSR_MPM_STALL_FPU_H = 0xB8D
VX_CSR_MPM_STALL_LSU = 0xB0E  # dispatch stage stalled due to LSU pipeline full
VX_CSR_MPM_STALL_LSU_H = 0xB8E
VX_CSR_MPM_STALL_SFU = 0xB0F  # dispatch stage stalled due to SFU pipeline full
VX_CSR_MPM_STALL_SFU_H = 0xB8F
VX_CSR_MPM_STALL_TCU = 0xB10  # dispatch stage stalled due to TCU pipeline full
VX_CSR_MPM_STALL_TCU_H = 0xB90

# PERF: branches
VX_CSR_MPM_BRANCHES     = 0xB11  # total conditional branches
VX_CSR_MPM_BRANCHES_H   = 0xB91
VX_CSR_MPM_DIVERGENCE   = 0xB12  # total divergent branches
VX_CSR_MPM_DIVERGENCE_H = 0xB92

# PERF: workload mix
VX_CSR_MPM_INSTR_ALU = 0xB13  # total ALU instructions
VX_CSR_MPM_INSTR_ALU_H = 0xB93
VX_CSR_MPM_INSTR_FPU = 0xB14  # total FPU instructions
VX_CSR_MPM_INSTR_FPU_H = 0xB94
VX_CSR_MPM_INSTR_LSU = 0xB15  # total LSU instructions
VX_CSR_MPM_INSTR_LSU_H = 0xB95
VX_CSR_MPM_INSTR_SFU = 0xB16  # total SFU instructions
VX_CSR_MPM_INSTR_SFU_H = 0xB96
VX_CSR_MPM_INSTR_TCU = 0xB17  # total TCU instructions
VX_CSR_MPM_INSTR_TCU_H = 0xB97

# PERF: memory
# reserved: VX_CSR_MPM_MEM_READS = 0xB18  # total reads
# reserved: VX_CSR_MPM_MEM_READS_H = 0xB98
# reserved: VX_CSR_MPM_MEM_WRITES = 0xB19  # total writes
# reserved: VX_CSR_MPM_MEM_WRITES_H = 0xB99
VX_CSR_MPM_IFETCHES     = 0xB1A # total instruction fetch requests
VX_CSR_MPM_IFETCHES_H   = 0xB9A
VX_CSR_MPM_IFETCH_LT    = 0xB1B # total instruction fetch latency
VX_CSR_MPM_IFETCH_LT_H  = 0xB9B
VX_CSR_MPM_LOADS        = 0xB1C # total LSU load requests
VX_CSR_MPM_LOADS_H      = 0xB9C
VX_CSR_MPM_LOAD_LT      = 0xB1D # total LSU load latency
VX_CSR_MPM_LOAD_LT_H    = 0xB9D
VX_CSR_MPM_STORES       = 0xB1E # total LSU store requests
VX_CSR_MPM_STORES_H     = 0xB9E

[csr_mpm_mem]
# PERF: icache
VX_CSR_MPM_ICACHE_READS = 0xB03  # total reads
VX_CSR_MPM_ICACHE_READS_H = 0xB83
VX_CSR_MPM_ICACHE_MISS_R = 0xB04  # read misses
VX_CSR_MPM_ICACHE_MISS_R_H = 0xB84
VX_CSR_MPM_ICACHE_MSHR_ST = 0xB05  # MSHR stalls
VX_CSR_MPM_ICACHE_MSHR_ST_H = 0xB85
# PERF: dcache
VX_CSR_MPM_DCACHE_READS = 0xB06  # total reads
VX_CSR_MPM_DCACHE_READS_H = 0xB86
VX_CSR_MPM_DCACHE_WRITES = 0xB07  # total writes
VX_CSR_MPM_DCACHE_WRITES_H = 0xB87
VX_CSR_MPM_DCACHE_MISS_R = 0xB08  # read misses
VX_CSR_MPM_DCACHE_MISS_R_H = 0xB88
VX_CSR_MPM_DCACHE_MISS_W = 0xB09  # write misses
VX_CSR_MPM_DCACHE_MISS_W_H = 0xB89
VX_CSR_MPM_DCACHE_BANK_ST = 0xB0A  # bank conflicts
VX_CSR_MPM_DCACHE_BANK_ST_H = 0xB8A
VX_CSR_MPM_DCACHE_MSHR_ST = 0xB0B  # MSHR stalls
VX_CSR_MPM_DCACHE_MSHR_ST_H = 0xB8B
# PERF: l2cache
VX_CSR_MPM_L2CACHE_READS = 0xB0C  # total reads
VX_CSR_MPM_L2CACHE_READS_H = 0xB8C
VX_CSR_MPM_L2CACHE_WRITES = 0xB0D  # total writes
VX_CSR_MPM_L2CACHE_WRITES_H = 0xB8D
VX_CSR_MPM_L2CACHE_MISS_R = 0xB0E  # read misses
VX_CSR_MPM_L2CACHE_MISS_R_H = 0xB8E
VX_CSR_MPM_L2CACHE_MISS_W = 0xB0F  # write misses
VX_CSR_MPM_L2CACHE_MISS_W_H = 0xB8F
VX_CSR_MPM_L2CACHE_BANK_ST = 0xB10  # bank conflicts
VX_CSR_MPM_L2CACHE_BANK_ST_H = 0xB90
VX_CSR_MPM_L2CACHE_MSHR_ST = 0xB11  # MSHR stalls
VX_CSR_MPM_L2CACHE_MSHR_ST_H = 0xB91
# PERF: l3cache
VX_CSR_MPM_L3CACHE_READS = 0xB12  # total reads
VX_CSR_MPM_L3CACHE_READS_H = 0xB92
VX_CSR_MPM_L3CACHE_WRITES = 0xB13  # total writes
VX_CSR_MPM_L3CACHE_WRITES_H = 0xB93
VX_CSR_MPM_L3CACHE_MISS_R = 0xB14  # read misses
VX_CSR_MPM_L3CACHE_MISS_R_H = 0xB94
VX_CSR_MPM_L3CACHE_MISS_W = 0xB15  # write misses
VX_CSR_MPM_L3CACHE_MISS_W_H = 0xB95
VX_CSR_MPM_L3CACHE_BANK_ST = 0xB16  # bank conflicts
VX_CSR_MPM_L3CACHE_BANK_ST_H = 0xB96
VX_CSR_MPM_L3CACHE_MSHR_ST = 0xB17  # MSHR stalls
VX_CSR_MPM_L3CACHE_MSHR_ST_H = 0xB97
# PERF: memory
VX_CSR_MPM_MEM_READS = 0xB18  # total reads
VX_CSR_MPM_MEM_READS_H = 0xB98
VX_CSR_MPM_MEM_WRITES = 0xB19  # total writes
VX_CSR_MPM_MEM_WRITES_H = 0xB99
VX_CSR_MPM_MEM_LT = 0xB1A  # memory latency
VX_CSR_MPM_MEM_LT_H = 0xB9A
VX_CSR_MPM_MEM_BANK_ST = 0xB1E  # bank conflicts
VX_CSR_MPM_MEM_BANK_ST_H = 0xB9E
# PERF: lmem
VX_CSR_MPM_LMEM_READS = 0xB1B  # memory reads
VX_CSR_MPM_LMEM_READS_H = 0xB9B
VX_CSR_MPM_LMEM_WRITES = 0xB1C  # memory writes
VX_CSR_MPM_LMEM_WRITES_H = 0xB9C
VX_CSR_MPM_LMEM_BANK_ST = 0xB1D  # bank conflicts
VX_CSR_MPM_LMEM_BANK_ST_H = 0xB9D
# PERF: coalescer
VX_CSR_MPM_COALESCER_MISS = 0xB1F  # coalescer misses
VX_CSR_MPM_COALESCER_MISS_H = 0xB9F
